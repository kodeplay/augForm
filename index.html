<!DOCTYPE html>
<html>
  <head>
    <title>Jquery Augmentable Form Plugin</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="augForm.js"></script>
  </head>
  <body>
    <a href="https://github.com/kodeplay/augForm"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
    <div class="container">
      <h2>AugForm</h2>
      <p>
        AugForm is a <a href="http://jquery.com">jquery</a> plugin for quickly adding the functionality of `growing` to
        html forms, ie. the user can add and remove fields from the form to increase or decrease the size of the form.
        For eg. Forms for saving meta data. <br/> <br/>
        A Form generated by <a href="https://www.djangoproject.com/">Django</a>
        <a href="https://docs.djangoproject.com/en/1.3/topics/forms/formsets/">Formset</a>
        would be a good example of this. In fact, it can be easily used with Django Formset using the
        <a href="#">djangoFormSet</a> <a href="#">templateHandler</a>.
      </p>

      <h4>Basic Example</h4>
      <p>
        Here is a basic example which does not use any templateHandler to start with.
        Both adding and removing of fields is taken care of. Notice that after clicking on add field once, a delete button
        appears on hover. This is because set the option 'min' to 1
      </p>

      <ul id="custom-handler-example" class="form-blocks tm40">
        <li>
          <table>
            <tr>
              <td><label>Attribute Name: </label></td>
              <td><input type="text" name="atributes[name][]" value=""/></td>
            </tr>
            <tr>
              <td><label>Attribute Value: </label></td>
              <td><input type="text" class="w10" name="attributes[value][]" value="" /></td>
            </tr>
            <tr>
              <td><label>Sort Order: </label></td>
              <td><input type="text" class="w10" name="attributes[sort_order][]" value=""/></td>
            </tr>
          </table>
          <div class="rm-block">x</div>
        </li>
      </ul>
      <input type="button" id="addBtn" value="Add Field"/>

      <!-- This is the template for the block to be added -->
      <table id="attr-block-tmpl" style="display: none;">
        <tr>
          <td><label>Attribute Name: </label></td>
          <td><input type="text" name="atributes[name][]" value=""/></td>
        </tr>
        <tr>
          <td><label>Attribute Value: </label></td>
          <td><input type="text" class="w10" name="attributes[value][]" value="" /></td>
        </tr>
        <tr>
          <td><label>Sort Order: </label></td>
          <td><input type="text" class="w10" name="attributes[sort_order][]" value=""/></td>
        </tr>
      </table>

      <h4>Django Formset Example</h4>
      
      <p>
        <form action="/polls/create/" id="poll-form" method="post">
          <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='da1f9569787c1b1d17243c1aef935eb8' /></div>
          <table class="form">
            <tr>
              <td>Poll Question</td>
              <td>
                <input id="id_poll-question" type="text" name="poll-question" maxlength="200" />
              </td>
            </tr>
            <tr class="hidden">
              <td colspan="2">
                <input type="hidden" name="poll-content_type_id" value="11" id="id_poll-content_type_id" />
                <input type="hidden" name="poll-object_id" value="4" id="id_poll-object_id" />
              </td>
            </tr>
          </table>
          <input type="hidden" name="choice-TOTAL_FORMS" value="1" id="id_choice-TOTAL_FORMS" /><input type="hidden" name="choice-INITIAL_FORMS" value="0" id="id_choice-INITIAL_FORMS" /><input type="hidden" name="choice-MAX_NUM_FORMS" id="id_choice-MAX_NUM_FORMS" />
          <ul id="choice-formset" class="form-blocks">
            <li>
              <table class="form" id="attr-block-tmpl">
                <tr>
                  <td>Choice</td>
                  <td>
                    <input id="id_choice-0-choice" type="text" name="choice-0-choice" maxlength="200" />
                    <a class="rm-block">x</a>
                  </td>
                </tr>
                <tr class="hidden">
                  <td colspan="2">
                    <input type="hidden" name="choice-0-id" id="id_choice-0-id" />
                    <input type="hidden" name="choice-0-poll" id="id_choice-0-poll" />
                    <input type="checkbox" name="choice-0-DELETE" id="id_choice-0-DELETE" />
                  </td>
                </tr>
              </table>              
            </li>
          </ul>
          <input type="button" id="add-choice-btn" value="Add Choice"/>
        </form>
      </p>
    </div>

    <p style="margin-top: 20px;">
      @author: Vineet Naik,
      <a href="http://kodeplay.com">Kodeplay</a><br/>
      Code available on Github: <a href="http://github.com/kodeplay/augForm">http://github.com/kodeplay/augForm</a>
    </p>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#custom-handler-example").augForm({
                itemElem: 'li',
                addBtn: '#addBtn',
                min: 1,
                tmplHandler: false,
                onAdd: function () {
                    $tmpl = $("#attr-block-tmpl").clone();
                    $tmpl.removeAttr('id').removeAttr('style');
                    $tmpl.find('input').removeAttr('disabled');
                    $("#custom-handler-example").append($('<li><div class="rm-block">x</div></li>').append($tmpl));
                }
            });            

            // for django formet example
            $("#choice-formset").augForm({
                itemElem: 'li',
                addBtn: '#add-choice-btn',
                rmBtn: '.rm-block',
                min: 2,
                tmplHandler: {
                    type: 'djangoFormSet',
                    MGMT_TOTAL_FORMS: $("input[name='choice-TOTAL_FORMS']"),
                    first_form: $("#choice-formset").children().eq(0).children().eq(0)
                },            
                onAdd: function () {
                     
                }
            }); 
        });
                
    </script>
  </body>
</html>
